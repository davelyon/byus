window.Link = Backbone.Model.extend({
  initialize: function() {},
  title: function() {},
  location: function() {}
});

window.BinLinks = Backbone.Collection.extend({
  model: Link,

  url: function() { return this.document.url(); }
});

window.Links = new BinLinks;

window.LinkView = Backbone.View.extend({

  tagName: "li",

  template: _.template($('#link-template').html()),

  events: {},

  initialize: function() {
    _.bindAll(this, 'render');
    this.model.bind('change', this.render);
    this.model.view = this;
  },

  render: function() {
    $(this.el).html(this.template(this.model.toJSON()));
    this.setContent();
    return this;
  },

  setContent: function() {
    var content = this.model.get('content');
    this.$('.title').text(content);
  }
}

window.BinLinksView = Backbone.View.extend({
  el: $('#bin_links'),

  events: {},

  initialize: function() {
    _.bindAll(this, 'addLink', 'addAll');

    Links.bind('add', this.addLink);
    Links.bind('all', this.addAll);

    Links.fetch();
  },

  addLink: function(link) {
    var view = new LinkView({model: link});
    this.$('.links').prepend(view.render().el);
  },

  addAll: function() {
    Links.each(this.addLink);
  }
}

window.App = new BinLinksView;




